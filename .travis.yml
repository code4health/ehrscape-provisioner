language: node_js
node_js:
- '0.10'
before_script:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- npm start > /dev/null &
- npm run update-webdriver
- sleep 1
script:
- node_modules/.bin/karma start karma.conf.js --no-auto-watch --single-run --reporters=dots
  --browsers=Firefox
- node_modules/.bin/protractor e2e-test/protractor.conf.js --browser=firefox
deploy:
  provider: openshift
  user: dave.thompson@across.co.uk
  password:
    secure: Da9jQcGH+Md2I8kJD5glPObNm3ekZPyVAnliSVKDQCR1h5j/R3OhP3Rh66EJoKmCc6yI9QE6Azgk0HLQPTwwQ5ftuG9uEqcxwJEwwGfbLeZDivrlUuVY7Fm4THIem+tmWzWAZlmVUTpdVJbRL/eXdoktRrxsPymtc9nLl7ENQbrwDzqds7XjrQ9TpRPfEXi0klQFxiiicbHed/161EVUpkks8TovYzyA23bXhQqhzrsJEjWgmSpP4MC2mtQgsBof0L+6EOmNLloo6HzErkLsuB+BYAsUNUA11U8mjoY9r/foeQ4zflJXeZmcltL5jMMgd5UGyNcbN/wJGiKzJaza5Ol8FfVwMIkZx80mdgNDHP0xPowf6cezhLXi7YbZsj/RibFbe2tDn1lNbXlzlG9CIkU9imJ5DuDPrrO72R5ISGlWIVWwhdSi4owln2XWbU1pn6TR0PzDHbmMLNHrWAsjVH33ExRqPaJtCQXqbYIDgYzfSHLMDIDVjv9aoZy0UtMQV6zMHo8bHs9otAbDPJNZlzdAL0ahG/cYJcUs/KOU6tOVw7OwhS8rxGPFBiTG8YmZW+fDkOT0y86d0jUUQU3qim7gaBONIQkLehT0lQkPXCkQRrhV4rYC5v7PJ5BnSqV0K/OIvJVPCwv10cgZX/nh9uGgnfnVh2silNmwWkmUvLE=
  app: provisioner
  domain: handihopd
  on:
    repo: handihealth/ehrscape-provisioner
  skip_cleanup: true
