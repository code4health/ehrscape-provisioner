language: node_js
node_js:
- '0.10'
before_script:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- npm start > /dev/null &
- npm run update-webdriver
- sleep 1
script:
- node_modules/.bin/karma start karma.conf.js --no-auto-watch --single-run --reporters=dots
  --browsers=Firefox
- node_modules/.bin/protractor e2e-test/protractor.conf.js --browser=firefox
deploy:
  provider: openshift
  user: dave.thompson@across.co.uk
  password:
    secure: "mL4kHVduAGq7SWXj+YDUmKd7niDro47+Cdr9/MR1JgfzcNcrhxXtYNTEwYieyWXY9WMYdA2WyfjG9PDERcWYqVoQGC3eeT2Nz1hC1OldOvjjoZL4s0e22rf1j1DFVd+1cVFUCOMzSaW7aCFWRCIU3il/DIFjk1+RrSny2gX2OA3gYVj1fRr/WuB8Mu5zdiGYjjJVOgec6/sLO9AUwbiPJzQlWOqe0eP3l/l19ZRcp2FcAlt8ESm4m5CsQxXpYCfrmT5bD9QRBl81iCMnmz7G4bg2yeAOcCffJ/simGO6kYc4vfo871+1YmHsW2L6ULij6BK2QYpQJAFFOGyL0XSB9ZiVb3H82MoFOqgsTRN3K8G5vmMODuTtzM7y0CNaCIr2hbDMO6Y1DKORHsjyKzBL14lsrZv9v/zqMpco/gvX6yyxQNaEefB3GFxY5UMS29/T8TQl470kqqW7N+BeSd8RhfMeJUSGktU3gQYRIiF5QWfqsCJHmUjklKZfGZMKyFGEloGpjCCwdRR4B4SJE6lgy0uU1P++o6dMPmo2jEHVep4b/bGj8Zw8IFzA1PEtIWVjnqdlS05A2elJG4LBVj8ulMmsw5/0PEkODH7E3DnudNBYOxC3HA7m3eR3JLumDipxrOhm1A86jTTB3xj8kW32DdwgUpnMA9k8gBV91CumYT0="
  app: provisioner
  domain: handihopd
  on:
    repo: handihealth/ehrscape-provisioner
  skip_cleanup: true
